<!DOCTYPE html>
<html lang="eng-us">

<head>
    <meta charset="utf-8">
    <title>Friend Finder</title>
    <!-- css/bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="html/css" href="css\style.css">
</head>

<body>
    <div class="container" id="survey-header">
        <h1>Survey Questions</h1>
        <hr class="my-4">
        <h2>About You</h2>
        <form>
            <div class="form-group">
                <label for="userName">Name (Required)</label>
                <input type="text" id="userName" class="form-control form-header">
            </div>
            <div class="form-group">
                <label for="userPicture">Link to Photo Image (Required)</label>
                <input type="text" id="userPhoto" class="form-control form-header">
            </div>
        </form>
        <hr class="my-4">
    </div>
    <div class="container" id="survey-form">
        <div class="survey-question">
            <h5>Select the option that fits best from 1 (strongly disagree) to 5 (strongly agree).</h5>
            <br>
            <h3>Question 1</h3>
            <br>
            <h4>You prefer eating hamburgers to hotdogs.</h4>
            <form>
                <fieldset>
                    <select id="questionOne">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 2</h3>
            <br>
            <h4>You prefer eating hamburgers to real dogs (hot or cold).</h4>
            <form>
                <fieldset>
                    <select id="questionTwo">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 3</h3>
            <br>
            <h4>Coffee is better than tea.</h4>
            <form>
                <fieldset>
                    <select id="questionThree">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 4</h3>
            <br>
            <h4>Despite maintaining a cheerful demeanor, you're dying on the inside.</h4>
            <form>
                <fieldset>
                    <select id="questionFour">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 5</h3>
            <br>
            <h4>You don't agree.</h4>
            <form>
                <fieldset>
                    <select id="questionFive">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 6</h3>
            <br>
            <h4>You would rather work in a group than work alone.</h4>
            <form>
                <fieldset>
                    <select id="questionSix">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 7</h3>
            <br>
            <h4>The Matrix is the greatest movie of all time.</h4>
            <form>
                <fieldset>
                    <select id="questionSeven">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 8</h3>
            <br>
            <h4>You feel like you've already read the best book you'll ever read because every 
                book you've read since then has been at least a little bit worse.
            </h4>
            <form>
                <fieldset>
                    <select id="questionEight">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 9</h3>
            <br>
            <h4>Other people's feelings seem like a strange mystery that you cannot understand.</h4>
            <form>
                <fieldset>
                    <select id="questionNine">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <div class="survey-question">
            <h3>Question 10</h3>
            <br>
            <h4>Filling out this questionnaire is enjoyable.</h4>
            <form>
                <fieldset>
                    <select id="questionTen">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </fieldset>
            </form>
            <br>
        </div>
        <input type="submit" value="Submit" id="submitBtn">

        <!-- Modal -->
        <div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="matchName">
                            You're perfect match
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="matchNameDiv">
                            <!-- Match name goes here -->
                        </div>
                        <div id="matchPhotoDiv">
                            <!-- Match photo goes here -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- jquery (full) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Bootstrap javascript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <!-- Page script -->
    <script>
        var q1;
        var q2;
        var q3;
        var q4;
        var q5;
        var q6;
        var q7;
        var q8;
        var q9;
        var q10;
        var scores = [];
        var userName;
        var userPhoto;

        $("#submitBtn").on("click", function () {
            let userName = $("#userName").val().trim();
            let userPhoto = $("#userPhoto").val().trim();
            if (!userName && !userPhoto || !userName || !userPhoto) {
                alert("You must fill in all required fields");
            }
            else {
                let q1 = parseInt($("#questionOne").val());
                let q2 = parseInt($("#questionTwo").val());
                let q3 = parseInt($("#questionThree").val());
                let q4 = parseInt($("#questionFour").val());
                let q5 = parseInt($("#questionFive").val());
                let q6 = parseInt($("#questionSix").val());
                let q7 = parseInt($("#questionSeven").val());
                let q8 = parseInt($("#questionEight").val());
                let q9 = parseInt($("#questionNine").val());
                let q10 = parseInt($("#questionTen").val());

                scores = [];
                scores.push(q1, q2, q3, q4, q5, q6, q7, q8, q9, q10);

                let user = {
                    name: userName,
                    photo: userPhoto,
                    scores: scores
                };

                $.post("/api/friends", user, function (response) {
                    console.log(user);
                    console.log(response);
                    var matchImg = $("<img>").attr("src", response.photo).addClass("match-image");
                    $('#resultsModal').modal('show');
                    $("#matchNameDiv").text(response.name);
                    $("#matchPhotoDiv").empty().append(matchImg);
                });
            }
        });


    </script>
</body>

</html>